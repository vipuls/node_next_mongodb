{"version":3,"sources":["../../src/adapters/fetch.js"],"names":["fetch","url","opts","then","status","resp","statusText","Promise","reject","toJSON","data","processData","JSON","parse","err","text","resolve"],"mappings":"AAAA;;;;;;kBAoBe,UAASA,KAAT,EAAgB;AAC7B,SAAO,UAACC,GAAD,EAAMC,IAAN;AAAA,WACLF,MAAMC,GAAN,EAAWC,IAAX,EAAiBC,IAAjB,CAAsB,gBAAQ;AAC5B;AACA,UAAMC,SAASC,KAAKD,MAAL,KAAgB,IAAhB,GAAuB,GAAvB,GAA6BC,KAAKD,MAAjD;AACA,UAAME,aAAaD,KAAKD,MAAL,KAAgB,IAAhB,GAAuB,YAAvB,GAAsCC,KAAKC,UAA9D;;AAEA,UAAIF,UAAU,GAAd,EAAmB;AACjB,eAAOG,QAAQC,MAAR,CAAe,EAAEJ,cAAF,EAAUE,sBAAV,EAAf,CAAP;AACD,OAFD,MAEO;AACL,eAAOG,OAAOJ,IAAP,EAAaF,IAAb,CAAkB,gBAAQ;AAC/B,cAAIC,UAAU,GAAV,IAAiBA,SAAS,GAA9B,EAAmC;AACjC,mBAAOM,IAAP;AACD,WAFD,MAEO;AACL,mBAAOH,QAAQC,MAAR,CAAeE,IAAf,CAAP;AACD;AACF,SANM,CAAP;AAOD;AACF,KAhBD,CADK;AAAA,GAAP;AAkBD,C;;AArCD,SAASC,WAAT,CAAqBD,IAArB,EAA2B;AACzB,MAAI;AACF,WAAOE,KAAKC,KAAL,CAAWH,IAAX,CAAP;AACD,GAFD,CAEE,OAAOI,GAAP,EAAY;AACZ,WAAOJ,IAAP;AACD;AACF;;AAED,SAASD,MAAT,CAAgBJ,IAAhB,EAAsB;AACpB,MAAIA,KAAKU,IAAT,EAAe;AACb,WAAOV,KAAKU,IAAL,GAAYZ,IAAZ,CAAiBQ,WAAjB,CAAP;AACD,GAFD,MAEO,IAAIN,gBAAgBE,OAApB,EAA6B;AAClC,WAAOF,KAAKF,IAAL,CAAUQ,WAAV,CAAP;AACD,GAFM,MAEA;AACL,WAAOJ,QAAQS,OAAR,CAAgBX,IAAhB,EAAsBF,IAAtB,CAA2BQ,WAA3B,CAAP;AACD;AACF","file":"fetch.js","sourcesContent":["\"use strict\";\n\nfunction processData(data) {\n  try {\n    return JSON.parse(data);\n  } catch (err) {\n    return data;\n  }\n}\n\nfunction toJSON(resp) {\n  if (resp.text) {\n    return resp.text().then(processData);\n  } else if (resp instanceof Promise) {\n    return resp.then(processData);\n  } else {\n    return Promise.resolve(resp).then(processData);\n  }\n}\n\nexport default function(fetch) {\n  return (url, opts) =>\n    fetch(url, opts).then(resp => {\n      // Normalize IE9's response to HTTP 204 when Win error 1223.\n      const status = resp.status === 1223 ? 204 : resp.status;\n      const statusText = resp.status === 1223 ? \"No Content\" : resp.statusText;\n\n      if (status >= 400) {\n        return Promise.reject({ status, statusText });\n      } else {\n        return toJSON(resp).then(data => {\n          if (status >= 200 && status < 300) {\n            return data;\n          } else {\n            return Promise.reject(data);\n          }\n        });\n      }\n    });\n}\n"]}